require 'spec_helper'
require_relative '../app/remote_timetable'

describe RemoteTimetable do
  let(:remote_timetable) { RemoteTimetable.new(date) }

  describe '#departure_times', vcr: { record: :once } do
    context 'manly slow ferry' do
      let(:date) { '2015-07-06' }
      it 'downloads remote timetable correctly' do
        expect(remote_timetable.departure_times).to eq (
          {
            "From Manly:Manly Fast Ferry" =>
              ["06:15", "06:45", "07:00", "07:15", "07:30", "07:40", "07:50", "08:00", "08:10", "08:20", "08:30", "08:40", "08:50", "09:00", "09:10", "09:20", "09:40", "10:10", "10:40", "11:10", "11:40", "12:10", "12:40", "13:10", "13:40", "14:10", "14:40", "15:10", "15:40", "16:10", "16:40", "17:10", "17:25", "17:40", "17:55", "18:05", "18:15", "18:30", "18:45", "18:55", "19:05", "19:20", "19:35", "19:55", "20:30", "21:00", "21:30"],
            "From Manly:Slow Ferry" =>
              ["06:10", "06:35", "07:00", "07:30", "08:00", "08:20", "08:50", "09:20", "09:45", "10:15", "10:45", "11:15", "11:45", "12:15", "12:45", "13:15", "13:45", "14:15", "14:45", "15:15", "15:45", "16:15", "16:45", "17:15", "17:45", "18:10", "18:45", "19:15", "19:30", "20:05", "20:45", "21:30", "22:15", "23:00", "23:40", "00:20 * "],
            "To Manly:Manly Fast Ferry" =>
              ["06:30", "06:45", "07:10", "07:25", "07:40", "07:55", "08:05", "08:15", "08:25", "08:35", "08:45", "08:55", "09:15", "09:40", "10:10", "10:40", "11:10", "11:40", "12:10", "12:40", "13:10", "13:40", "14:10", "14:40", "15:10", "15:40", "16:15", "16:40", "17:00", "17:15", "17:30", "17:40", "17:50", "18:05", "18:20", "18:30", "18:40", "18:55", "19:10", "19:30", "20:00", "20:30", "21:00"],
            "To Manly:Slow Ferry" =>
              ["05:30", "06:20", "06:50", "07:15", "07:40", "08:10", "08:40", "09:00", "09:30", "10:00", "10:30", "11:00", "11:30", "12:00", "12:30", "13:00", "13:30", "14:00", "14:30", "15:00", "15:30", "16:00", "16:30", "17:00", "17:30", "18:00", "18:30", "18:50", "19:25", "19:55", "20:45", "21:30", "22:15", "23:00", "23:45"]
          }
        )
      end
    end
  end
end
